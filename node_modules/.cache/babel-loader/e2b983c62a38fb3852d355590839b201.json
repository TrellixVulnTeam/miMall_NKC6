{"remainingRequest":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/babel-loader/lib/index.js!/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/src/pages/cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/src/pages/cart.vue","mtime":1631779758748},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IE9yZGVySGVhZGVyIGZyb20gJy4vLi4vY29tcG9uZW50cy9PcmRlckhlYWRlcic7CmltcG9ydCBTZXJ2aWNlQmFyIGZyb20gJy4vLi4vY29tcG9uZW50cy9TZXJ2aWNlQmFyJzsKaW1wb3J0IE5hdkZvb3RlciBmcm9tICcuLy4uL2NvbXBvbmVudHMvTmF2Rm9vdGVyJzsKaW1wb3J0IE1vZGFsIGZyb20gJy4vLi4vY29tcG9uZW50cy9Nb2RhbCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnaW5kZXgnLAogIGNvbXBvbmVudHM6IHsKICAgIE9yZGVySGVhZGVyOiBPcmRlckhlYWRlciwKICAgIFNlcnZpY2VCYXI6IFNlcnZpY2VCYXIsCiAgICBOYXZGb290ZXI6IE5hdkZvb3RlciwKICAgIE1vZGFsOiBNb2RhbAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IFtdLAogICAgICAvL+WVhuWTgeWIl+ihqAogICAgICBhbGxDaGVja2VkOiBmYWxzZSwKICAgICAgLy/mmK/lkKblhajpgIkKICAgICAgY2FydFRvdGFsUHJpY2U6IDAsCiAgICAgIC8v5ZWG5ZOB5oC76YeR6aKdCiAgICAgIGNoZWNrZWROdW06IDAgLy/pgInkuK3llYblk4HmlbDph48KCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0Q2FydExpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOiOt+WPlui0reeJqei9puWIl+ihqAogICAgZ2V0Q2FydExpc3Q6IGZ1bmN0aW9uIGdldENhcnRMaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5heGlvcy5nZXQoJy9jYXJ0cycpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLnJlbmRlckRhdGEocmVzKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5pu05paw6LSt54mp6L2m5pWw6YeP5ZKM6LSt54mp6L2m5Y2V6YCJ54q25oCBCiAgICB1cGRhdGVDYXJ0OiBmdW5jdGlvbiB1cGRhdGVDYXJ0KGl0ZW0sIHR5cGUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgcXVhbnRpdHkgPSBpdGVtLnF1YW50aXR5LAogICAgICAgICAgc2VsZWN0ZWQgPSBpdGVtLnByb2R1Y3RTZWxlY3RlZDsKCiAgICAgIGlmICh0eXBlID09ICctJykgewogICAgICAgIGlmIChxdWFudGl0eSA9PSAxKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+WVhuWTgeiHs+WwkeS/neeVmeS4gOS7ticpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLS1xdWFudGl0eTsKICAgICAgfSBlbHNlIGlmICh0eXBlID09ICcrJykgewogICAgICAgIGlmIChxdWFudGl0eSA+IGl0ZW0ucHJvZHVjdFN0b2NrKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+i0reS5sOaVsOmHj+S4jeiDvei2hei/h+W6k+WtmOaVsOmHjycpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgKytxdWFudGl0eTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzZWxlY3RlZCA9ICFpdGVtLnByb2R1Y3RTZWxlY3RlZDsKICAgICAgfQoKICAgICAgdGhpcy5heGlvcy5wdXQoIi9jYXJ0cy8iLmNvbmNhdChpdGVtLnByb2R1Y3RJZCksIHsKICAgICAgICBxdWFudGl0eTogcXVhbnRpdHksCiAgICAgICAgc2VsZWN0ZWQ6IHNlbGVjdGVkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMi5yZW5kZXJEYXRhKHJlcyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIoOmZpOi0reeJqei9puWVhuWTgQogICAgZGVsUHJvZHVjdDogZnVuY3Rpb24gZGVsUHJvZHVjdChpdGVtKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5heGlvcy5kZWxldGUoIi9jYXJ0cy8iLmNvbmNhdChpdGVtLnByb2R1Y3RJZCkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMy4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTmiJDlip8nKTsKCiAgICAgICAgX3RoaXMzLnJlbmRlckRhdGEocmVzKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5o6n5Yi25YWo6YCJ5Yqf6IO9CiAgICB0b2dnbGVBbGw6IGZ1bmN0aW9uIHRvZ2dsZUFsbCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgdXJsID0gdGhpcy5hbGxDaGVja2VkID8gJy9jYXJ0cy91blNlbGVjdEFsbCcgOiAnL2NhcnRzL3NlbGVjdEFsbCc7CiAgICAgIHRoaXMuYXhpb3MucHV0KHVybCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXM0LnJlbmRlckRhdGEocmVzKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5YWs5YWx6LWL5YC8CiAgICByZW5kZXJEYXRhOiBmdW5jdGlvbiByZW5kZXJEYXRhKHJlcykgewogICAgICB0aGlzLmxpc3QgPSByZXMuY2FydFByb2R1Y3RWb0xpc3QgfHwgW107CiAgICAgIHRoaXMuYWxsQ2hlY2tlZCA9IHJlcy5zZWxlY3RlZEFsbDsKICAgICAgdGhpcy5jYXJ0VG90YWxQcmljZSA9IHJlcy5jYXJ0VG90YWxQcmljZTsKICAgICAgdGhpcy5jaGVja2VkTnVtID0gdGhpcy5saXN0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLnByb2R1Y3RTZWxlY3RlZDsKICAgICAgfSkubGVuZ3RoOwogICAgfSwKICAgIC8vIOi0reeJqei9puS4i+WNlQogICAgb3JkZXI6IGZ1bmN0aW9uIG9yZGVyKCkgewogICAgICB2YXIgaXNDaGVjayA9IHRoaXMubGlzdC5ldmVyeShmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiAhaXRlbS5wcm9kdWN0U2VsZWN0ZWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGlzQ2hlY2spIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+mAieaLqeS4gOS7tuWVhuWTgScpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvb3JkZXIvY29uZmlybScpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["cart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"cart\">\n    <order-header title=\"我的购物车\">\n      <template v-slot:tip>\n        <span>温馨提示：产品是否购买成功，以最终下单为准哦，请尽快结算</span>\n      </template>\n    </order-header>\n    <div class=\"wrapper\">\n      <div class=\"container\">\n        <div class=\"cart-box\">\n          <ul class=\"cart-item-head\">\n            <li class=\"col-1\">\n              <span\n                class=\"checkbox\"\n                v-bind:class=\"{ checked: allChecked }\"\n                @click=\"toggleAll\"\n              ></span>\n              全选\n            </li>\n            <li class=\"col-3\">商品名称</li>\n            <li class=\"col-1\">单价</li>\n            <li class=\"col-2\">数量</li>\n            <li class=\"col-1\">小计</li>\n            <li class=\"col-1\">操作</li>\n          </ul>\n          <ul class=\"cart-item-list\">\n            <li\n              class=\"cart-item\"\n              v-for=\"(item, index) in list\"\n              v-bind:key=\"index\"\n            >\n              <div class=\"item-check\">\n                <span\n                  class=\"checkbox\"\n                  v-bind:class=\"{ checked: item.productSelected }\"\n                  @click=\"updateCart(item)\"\n                ></span>\n              </div>\n              <div class=\"item-name\">\n                <img v-lazy=\"item.productMainImage\" alt=\"\" />\n                <span>\n                  {{ item.productName + ' , ' + item.productSubtitle }}\n                </span>\n              </div>\n              <div class=\"item-price\">{{ item.productPrice }}</div>\n              <div class=\"item-num\">\n                <div class=\"num-box\">\n                  <a href=\"javascript:;\" @click=\"updateCart(item, '-')\">-</a>\n                  <span>{{ item.quantity }}</span>\n                  <a href=\"javascript:;\" @click=\"updateCart(item, '+')\">+</a>\n                </div>\n              </div>\n              <div class=\"item-total\">{{ item.productTotalPrice }}</div>\n              <div class=\"item-del\" @click=\"delProduct(item)\"></div>\n            </li>\n          </ul>\n        </div>\n        <div class=\"order-wrap clearfix\">\n          <div class=\"cart-tip fl\">\n            <a href=\"/#/index\">继续购物</a>\n            共\n            <span>{{ list.length }}</span>\n            件商品，已选择\n            <span>{{ checkedNum }}</span>\n            件\n          </div>\n          <div class=\"total fr\">\n            合计：\n            <span>{{ cartTotalPrice }}</span>\n            元\n            <a href=\"javascript:;\" class=\"btn\" @click=\"order\">去结算</a>\n          </div>\n        </div>\n      </div>\n    </div>\n    <service-bar></service-bar>\n    <nav-footer></nav-footer>\n  </div>\n</template>\n<script>\nimport OrderHeader from './../components/OrderHeader'\nimport ServiceBar from './../components/ServiceBar'\nimport NavFooter from './../components/NavFooter'\nimport Modal from './../components/Modal'\nexport default {\n  name: 'index',\n  components: {\n    OrderHeader,\n    ServiceBar,\n    NavFooter,\n    Modal,\n  },\n  data() {\n    return {\n      list: [], //商品列表\n      allChecked: false, //是否全选\n      cartTotalPrice: 0, //商品总金额\n      checkedNum: 0, //选中商品数量\n    }\n  },\n  mounted() {\n    this.getCartList()\n  },\n  methods: {\n    // 获取购物车列表\n    getCartList() {\n      this.axios.get('/carts').then((res) => {\n        this.renderData(res)\n      })\n    },\n    // 更新购物车数量和购物车单选状态\n    updateCart(item, type) {\n      let quantity = item.quantity,\n        selected = item.productSelected\n      if (type == '-') {\n        if (quantity == 1) {\n          this.$message.warning('商品至少保留一件')\n          return\n        }\n        --quantity\n      } else if (type == '+') {\n        if (quantity > item.productStock) {\n          this.$message.warning('购买数量不能超过库存数量')\n          return\n        }\n        ++quantity\n      } else {\n        selected = !item.productSelected\n      }\n      this.axios\n        .put(`/carts/${item.productId}`, {\n          quantity,\n          selected,\n        })\n        .then((res) => {\n          this.renderData(res)\n        })\n    },\n    // 删除购物车商品\n    delProduct(item) {\n      this.axios.delete(`/carts/${item.productId}`).then((res) => {\n        this.$message.success('删除成功')\n        this.renderData(res)\n      })\n    },\n    // 控制全选功能\n    toggleAll() {\n      let url = this.allChecked ? '/carts/unSelectAll' : '/carts/selectAll'\n      this.axios.put(url).then((res) => {\n        this.renderData(res)\n      })\n    },\n    // 公共赋值\n    renderData(res) {\n      this.list = res.cartProductVoList || []\n      this.allChecked = res.selectedAll\n      this.cartTotalPrice = res.cartTotalPrice\n      this.checkedNum = this.list.filter((item) => item.productSelected).length\n    },\n    // 购物车下单\n    order() {\n      let isCheck = this.list.every((item) => !item.productSelected)\n      if (isCheck) {\n        this.$message.warning('请选择一件商品')\n      } else {\n        this.$router.push('/order/confirm')\n      }\n    },\n  },\n}\n</script>\n<style lang=\"scss\">\n.cart {\n  .wrapper {\n    background-color: #f5f5f5;\n    padding-top: 30px;\n    padding-bottom: 114px;\n    .cart-box {\n      background-color: #fff;\n      font-size: 14px;\n      color: #999999;\n      text-align: center;\n      .checkbox {\n        display: inline-block;\n        width: 22px;\n        height: 22px;\n        border: 1px solid #e5e5e5;\n        vertical-align: middle;\n        margin-right: 17px;\n        cursor: pointer;\n        &.checked {\n          background: url('/imgs/icon-gou.png') #ff6600 no-repeat center;\n          background-size: 16px 12px;\n          border: none;\n        }\n      }\n      .cart-item-head {\n        display: flex;\n        height: 79px;\n        line-height: 79px;\n        .col-1 {\n          flex: 1;\n        }\n        .col-2 {\n          flex: 2;\n        }\n        .col-3 {\n          flex: 3;\n        }\n      }\n      .cart-item-list {\n        .cart-item {\n          display: flex;\n          align-items: center;\n          height: 125px;\n          border-top: 1px solid #e5e5e5;\n          font-size: 16px;\n          .item-check {\n            flex: 1;\n          }\n          .item-name {\n            flex: 3;\n            font-size: 18px;\n            color: #333333;\n            display: flex;\n            align-items: center;\n            img {\n              width: 80px;\n              height: 80px;\n              vertical-align: middle;\n            }\n            span {\n              margin-left: 30px;\n            }\n          }\n          .item-price {\n            flex: 1;\n            color: #333333;\n          }\n          .item-num {\n            flex: 2;\n            .num-box {\n              display: inline-block;\n              width: 150px;\n              height: 40px;\n              line-height: 40px;\n              border: 1px solid #e5e5e5;\n              font-size: 14px;\n              a {\n                display: inline-block;\n                width: 50px;\n                color: #333333;\n              }\n              span {\n                display: inline-block;\n                width: 50px;\n                color: #333333;\n              }\n            }\n          }\n          .item-total {\n            flex: 1;\n            color: #ff6600;\n          }\n          .item-del {\n            flex: 1;\n            width: 14px;\n            height: 12px;\n            background: url('/imgs/icon-close.png') no-repeat center;\n            background-size: contain;\n            cursor: pointer;\n          }\n        }\n      }\n    }\n    .order-wrap {\n      font-size: 14px;\n      color: #666666;\n      margin-top: 20px;\n      height: 50px;\n      line-height: 50px;\n      .cart-tip {\n        margin-left: 29px;\n        a {\n          color: #666666;\n          margin-right: 37px;\n        }\n        span {\n          color: #ff6600;\n          margin: 0 5px;\n        }\n      }\n      .total {\n        font-size: 14px;\n        color: #ff6600;\n        span {\n          font-size: 24px;\n        }\n        a {\n          width: 202px;\n          height: 50px;\n          line-height: 50px;\n          font-size: 18px;\n          margin-left: 37px;\n        }\n      }\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/pages"}]}