{"remainingRequest":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/src/pages/cart.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/src/pages/cart.vue","mtime":1631865919339},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/sass-loader/lib/loader.js","mtime":1631756461819},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jYXJ0IHsKICAud3JhcHBlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1OwogICAgcGFkZGluZy10b3A6IDMwcHg7CiAgICBwYWRkaW5nLWJvdHRvbTogMTE0cHg7CiAgICAuY2FydC1ib3ggewogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgIGNvbG9yOiAjOTk5OTk5OwogICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgIC5jaGVja2JveCB7CiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgIHdpZHRoOiAyMnB4OwogICAgICAgIGhlaWdodDogMjJweDsKICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZTVlNWU1OwogICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgICAgICAgbWFyZ2luLXJpZ2h0OiAxN3B4OwogICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAmLmNoZWNrZWQgewogICAgICAgICAgYmFja2dyb3VuZDogdXJsKCIvaW1ncy9pY29uLWdvdS5wbmciKSAjZmY2NjAwIG5vLXJlcGVhdCBjZW50ZXI7CiAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IDE2cHggMTJweDsKICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgLmNhcnQtaXRlbS1oZWFkIHsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGhlaWdodDogNzlweDsKICAgICAgICBsaW5lLWhlaWdodDogNzlweDsKICAgICAgICAuY29sLTEgewogICAgICAgICAgZmxleDogMTsKICAgICAgICB9CiAgICAgICAgLmNvbC0yIHsKICAgICAgICAgIGZsZXg6IDI7CiAgICAgICAgfQogICAgICAgIC5jb2wtMyB7CiAgICAgICAgICBmbGV4OiAzOwogICAgICAgIH0KICAgICAgfQogICAgICAuY2FydC1pdGVtLWxpc3QgewogICAgICAgIC5jYXJ0LWl0ZW0gewogICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICBoZWlnaHQ6IDEyNXB4OwogICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlNWU1ZTU7CiAgICAgICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgICAgICAuaXRlbS1jaGVjayB7CiAgICAgICAgICAgIGZsZXg6IDE7CiAgICAgICAgICB9CiAgICAgICAgICAuaXRlbS1uYW1lIHsKICAgICAgICAgICAgZmxleDogMzsKICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4OwogICAgICAgICAgICBjb2xvcjogIzMzMzMzMzsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgaW1nIHsKICAgICAgICAgICAgICB3aWR0aDogODBweDsKICAgICAgICAgICAgICBoZWlnaHQ6IDgwcHg7CiAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzcGFuIHsKICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMzBweDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgLml0ZW0tcHJpY2UgewogICAgICAgICAgICBmbGV4OiAxOwogICAgICAgICAgICBjb2xvcjogIzMzMzMzMzsKICAgICAgICAgIH0KICAgICAgICAgIC5pdGVtLW51bSB7CiAgICAgICAgICAgIGZsZXg6IDI7CiAgICAgICAgICAgIC5udW0tYm94IHsKICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgICAgICAgd2lkdGg6IDE1MHB4OwogICAgICAgICAgICAgIGhlaWdodDogNDBweDsKICAgICAgICAgICAgICBsaW5lLWhlaWdodDogNDBweDsKICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZTVlNWU1OwogICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgICBhIHsKICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAgICAgICAgIHdpZHRoOiA1MHB4OwogICAgICAgICAgICAgICAgY29sb3I6ICMzMzMzMzM7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHNwYW4gewogICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgICAgICAgICAgd2lkdGg6IDUwcHg7CiAgICAgICAgICAgICAgICBjb2xvcjogIzMzMzMzMzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC5pdGVtLXRvdGFsIHsKICAgICAgICAgICAgZmxleDogMTsKICAgICAgICAgICAgY29sb3I6ICNmZjY2MDA7CiAgICAgICAgICB9CiAgICAgICAgICAuaXRlbS1kZWwgewogICAgICAgICAgICBmbGV4OiAxOwogICAgICAgICAgICB3aWR0aDogMTRweDsKICAgICAgICAgICAgaGVpZ2h0OiAxMnB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB1cmwoIi9pbWdzL2ljb24tY2xvc2UucG5nIikgbm8tcmVwZWF0IGNlbnRlcjsKICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiBjb250YWluOwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAub3JkZXItd3JhcCB7CiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgY29sb3I6ICM2NjY2NjY7CiAgICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgICAgIGhlaWdodDogNTBweDsKICAgICAgbGluZS1oZWlnaHQ6IDUwcHg7CiAgICAgIC5jYXJ0LXRpcCB7CiAgICAgICAgbWFyZ2luLWxlZnQ6IDI5cHg7CiAgICAgICAgYSB7CiAgICAgICAgICBjb2xvcjogIzY2NjY2NjsKICAgICAgICAgIG1hcmdpbi1yaWdodDogMzdweDsKICAgICAgICB9CiAgICAgICAgc3BhbiB7CiAgICAgICAgICBjb2xvcjogI2ZmNjYwMDsKICAgICAgICAgIG1hcmdpbjogMCA1cHg7CiAgICAgICAgfQogICAgICB9CiAgICAgIC50b3RhbCB7CiAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgIGNvbG9yOiAjZmY2NjAwOwogICAgICAgIHNwYW4gewogICAgICAgICAgZm9udC1zaXplOiAyNHB4OwogICAgICAgIH0KICAgICAgICBhIHsKICAgICAgICAgIHdpZHRoOiAyMDJweDsKICAgICAgICAgIGhlaWdodDogNTBweDsKICAgICAgICAgIGxpbmUtaGVpZ2h0OiA1MHB4OwogICAgICAgICAgZm9udC1zaXplOiAxOHB4OwogICAgICAgICAgbWFyZ2luLWxlZnQ6IDM3cHg7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cart.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"cart\">\n    <order-header title=\"我的购物车\">\n      <template v-slot:tip>\n        <span>温馨提示：产品是否购买成功，以最终下单为准哦，请尽快结算</span>\n      </template>\n    </order-header>\n    <div class=\"wrapper\">\n      <div class=\"container\">\n        <div class=\"cart-box\">\n          <ul class=\"cart-item-head\">\n            <li class=\"col-1\">\n              <span\n                class=\"checkbox\"\n                v-bind:class=\"{ checked: allChecked }\"\n                @click=\"toggleAll\"\n              ></span>\n              全选\n            </li>\n            <li class=\"col-3\">商品名称</li>\n            <li class=\"col-1\">单价</li>\n            <li class=\"col-2\">数量</li>\n            <li class=\"col-1\">小计</li>\n            <li class=\"col-1\">操作</li>\n          </ul>\n          <ul class=\"cart-item-list\">\n            <li\n              class=\"cart-item\"\n              v-for=\"(item, index) in list\"\n              v-bind:key=\"index\"\n            >\n              <div class=\"item-check\">\n                <span\n                  class=\"checkbox\"\n                  v-bind:class=\"{ checked: item.productSelected }\"\n                  @click=\"updateCart(item)\"\n                ></span>\n              </div>\n              <div class=\"item-name\">\n                <img v-lazy=\"item.productMainImage\" alt=\"\" />\n                <span>\n                  {{ item.productName + \" , \" + item.productSubtitle }}\n                </span>\n              </div>\n              <div class=\"item-price\">{{ item.productPrice }}</div>\n              <div class=\"item-num\">\n                <div class=\"num-box\">\n                  <a href=\"javascript:;\" @click=\"updateCart(item, '-')\">-</a>\n                  <span>{{ item.quantity }}</span>\n                  <a href=\"javascript:;\" @click=\"updateCart(item, '+')\">+</a>\n                </div>\n              </div>\n              <div class=\"item-total\">{{ item.productTotalPrice }}</div>\n              <div class=\"item-del\" @click=\"delProduct(item)\"></div>\n            </li>\n          </ul>\n        </div>\n        <div class=\"order-wrap clearfix\">\n          <div class=\"cart-tip fl\">\n            <a href=\"/#/index\">继续购物</a>\n            共\n            <span>{{ list.length }}</span>\n            件商品，已选择\n            <span>{{ checkedNum }}</span>\n            件\n          </div>\n          <div class=\"total fr\">\n            合计：\n            <span>{{ cartTotalPrice }}</span>\n            元\n            <a href=\"javascript:;\" class=\"btn\" @click=\"order\">去结算</a>\n          </div>\n        </div>\n      </div>\n    </div>\n    <service-bar></service-bar>\n    <nav-footer></nav-footer>\n  </div>\n</template>\n<script>\nimport OrderHeader from \"./../components/OrderHeader\";\nimport ServiceBar from \"./../components/ServiceBar\";\nimport NavFooter from \"./../components/NavFooter\";\nimport Modal from \"./../components/Modal\";\nexport default {\n  name: \"index\",\n  components: {\n    OrderHeader,\n    ServiceBar,\n    NavFooter,\n    Modal,\n  },\n  data() {\n    return {\n      list: [], //商品列表\n      allChecked: false, //是否全选\n      cartTotalPrice: 0, //商品总金额\n      checkedNum: 0, //选中商品数量\n    };\n  },\n  mounted() {\n    this.getCartList();\n  },\n  methods: {\n    // 获取购物车列表\n    getCartList() {\n      this.axios.get(\"/carts\").then((res) => {\n        this.renderData(res);\n      });\n    },\n    // 更新购物车数量和购物车单选状态\n    updateCart(item, type) {\n      let quantity = item.quantity,\n        selected = item.productSelected;\n      if (type == \"-\") {\n        if (quantity == 1) {\n          this.$message.warning(\"商品至少保留一件\");\n          return;\n        }\n        --quantity;\n      } else if (type == \"+\") {\n        if (quantity > item.productStock) {\n          this.$message.warning(\"购买数量不能超过库存数量\");\n          return;\n        }\n        ++quantity;\n      } else {\n        selected = !item.productSelected;\n      }\n      this.axios\n        .put(`/carts/${item.productId}`, {\n          quantity,\n          selected,\n        })\n        .then((res) => {\n          this.renderData(res);\n        });\n    },\n    // 删除购物车商品\n    delProduct(item) {\n      this.axios.delete(`/carts/${item.productId}`).then((res) => {\n        this.$message.success(\"删除成功\");\n        this.renderData(res);\n      });\n    },\n    // 控制全选功能\n    toggleAll() {\n      let url = this.allChecked ? \"/carts/unSelectAll\" : \"/carts/selectAll\";\n      this.axios.put(url).then((res) => {\n        this.renderData(res);\n      });\n    },\n    // 公共赋值\n    renderData(res) {\n      this.list = res.cartProductVoList || [];\n      this.allChecked = res.selectedAll;\n      this.cartTotalPrice = res.cartTotalPrice;\n      this.checkedNum = this.list.filter((item) => item.productSelected).length;\n    },\n    // 购物车下单\n    order() {\n      let isCheck = this.list.every((item) => !item.productSelected);\n      if (isCheck) {\n        this.$message.warning(\"请选择一件商品\");\n      } else {\n        this.$router.push(\"/order/confirm\");\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n.cart {\n  .wrapper {\n    background-color: #f5f5f5;\n    padding-top: 30px;\n    padding-bottom: 114px;\n    .cart-box {\n      background-color: #fff;\n      font-size: 14px;\n      color: #999999;\n      text-align: center;\n      .checkbox {\n        display: inline-block;\n        width: 22px;\n        height: 22px;\n        border: 1px solid #e5e5e5;\n        vertical-align: middle;\n        margin-right: 17px;\n        cursor: pointer;\n        &.checked {\n          background: url(\"/imgs/icon-gou.png\") #ff6600 no-repeat center;\n          background-size: 16px 12px;\n          border: none;\n        }\n      }\n      .cart-item-head {\n        display: flex;\n        height: 79px;\n        line-height: 79px;\n        .col-1 {\n          flex: 1;\n        }\n        .col-2 {\n          flex: 2;\n        }\n        .col-3 {\n          flex: 3;\n        }\n      }\n      .cart-item-list {\n        .cart-item {\n          display: flex;\n          align-items: center;\n          height: 125px;\n          border-top: 1px solid #e5e5e5;\n          font-size: 16px;\n          .item-check {\n            flex: 1;\n          }\n          .item-name {\n            flex: 3;\n            font-size: 18px;\n            color: #333333;\n            display: flex;\n            align-items: center;\n            img {\n              width: 80px;\n              height: 80px;\n              vertical-align: middle;\n            }\n            span {\n              margin-left: 30px;\n            }\n          }\n          .item-price {\n            flex: 1;\n            color: #333333;\n          }\n          .item-num {\n            flex: 2;\n            .num-box {\n              display: inline-block;\n              width: 150px;\n              height: 40px;\n              line-height: 40px;\n              border: 1px solid #e5e5e5;\n              font-size: 14px;\n              a {\n                display: inline-block;\n                width: 50px;\n                color: #333333;\n              }\n              span {\n                display: inline-block;\n                width: 50px;\n                color: #333333;\n              }\n            }\n          }\n          .item-total {\n            flex: 1;\n            color: #ff6600;\n          }\n          .item-del {\n            flex: 1;\n            width: 14px;\n            height: 12px;\n            background: url(\"/imgs/icon-close.png\") no-repeat center;\n            background-size: contain;\n            cursor: pointer;\n          }\n        }\n      }\n    }\n    .order-wrap {\n      font-size: 14px;\n      color: #666666;\n      margin-top: 20px;\n      height: 50px;\n      line-height: 50px;\n      .cart-tip {\n        margin-left: 29px;\n        a {\n          color: #666666;\n          margin-right: 37px;\n        }\n        span {\n          color: #ff6600;\n          margin: 0 5px;\n        }\n      }\n      .total {\n        font-size: 14px;\n        color: #ff6600;\n        span {\n          font-size: 24px;\n        }\n        a {\n          width: 202px;\n          height: 50px;\n          line-height: 50px;\n          font-size: 18px;\n          margin-left: 37px;\n        }\n      }\n    }\n  }\n}\n</style>\n"]}]}