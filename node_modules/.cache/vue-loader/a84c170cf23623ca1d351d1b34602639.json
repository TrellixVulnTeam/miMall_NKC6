{"remainingRequest":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/src/components/NavHeader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/src/components/NavHeader.vue","mtime":1631865919339},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAibmF2LWhlYWRlciIsCiAgZGF0YSgpIHsKICAgICIiOwogICAgcmV0dXJuIHsKICAgICAgcGhvbmVMaXN0OiBbXSwKICAgICAgcmVkTWlMaXN0OiBbXSwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLy/lvZPlj5jph4/lu7bml7bliqDovb3lnKhkYXRh6YeM5LiN5pu05paw5pe277yMY29tcHV0ZWTlvZPlj5jph4/lj5HnlJ/lj5jljJbml7bkvJrph43mlrDorqHnrpcKICAgIC8vIHVzZXJuYW1lKCkgewogICAgLy8gcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJuYW1lOwogICAgLy8gfSwKICAgIC8vIGNhcnRDb3VudCgpIHsKICAgIC8vIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5zYXZlQ2FydENvdW50OwogICAgLy8gfSwKICAgIC4uLm1hcFN0YXRlKFsidXNlcm5hbWUiLCAiY2FydENvdW50Il0pLCAvL+WtmOWAvAogIH0sCiAgZmlsdGVyczogewogICAgY3VycmVuY3kodmFsKSB7CiAgICAgIGlmICghdmFsKSByZXR1cm4gIjAuMDAiOwogICAgICByZXR1cm4gIsKlIiArIHZhbC50b0ZpeGVkKDIpICsgIuWFgyI7CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0UHJvZHVjdExpc3QoKTsKICAgIGxldCBwYXJhbXMgPSB0aGlzLiRyb3V0ZS5wYXJhbXM7CiAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5mcm9tID09ICJsb2dpbiIpIHsKICAgICAgdGhpcy5nZXRDYXJ0Q291bnQoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ2luKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2xvZ2luIik7CiAgICB9LAogICAgZ2V0UHJvZHVjdExpc3QoKSB7CiAgICAgIHRoaXMuYXhpb3MKICAgICAgICAuZ2V0KCIuL3Byb2R1Y3RzIiwgewogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIC8vZ2V0IOimgeeUqHBhcmFtc++8jHBvc3TlsLHkuI3pnIDopoHkuoYKICAgICAgICAgICAgY2F0ZWdvcnlJZDogIjEwMDAxMiIsCiAgICAgICAgICAgIC8vIHBhZ2VTaXplOjYKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAocmVzLmxpc3QubGVuZ3RoID4gNikgewogICAgICAgICAgICB0aGlzLnBob25lTGlzdCA9IHJlcy5saXN0LnNsaWNlKDAsIDYpOyAvL+Wkp+S6ju+8luadoeWPquWPluWJjemdou+8luadoQogICAgICAgICAgICB0aGlzLnJlZE1pTGlzdCA9IHJlcy5saXN0LnNsaWNlKDYsIDEyKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBnZXRDYXJ0Q291bnQoKSB7CiAgICAgIHRoaXMuYXhpb3MuZ2V0KCIvY2FydHMvcHJvZHVjdHMvc3VtIikudGhlbigocmVzID0gMCkgPT4gewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzYXZlQ2FydENvdW50IiwgcmVzKTsKICAgICAgfSk7CiAgICB9LAogICAgbG9nb3V0KCkgewogICAgICB0aGlzLmF4aW9zLnBvc3QoIi91c2VyL2xvZ291dCIpLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi6YCA5Ye65oiQ5YqfIik7CiAgICAgICAgdGhpcy4kY29va2llLnNldCgidXNlcklkIiwgIiIsIHsgZXhwaXJlczogIi0xIiB9KTsgLy9leHBpcmVzOictMScs5Y2z5Yi76L+H5pyfOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzYXZlVXNlck5hbWUiLCAiIik7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNhdmVDYXJ0Q291bnQiLCAiMCIpOwogICAgICB9KTsKICAgIH0sCiAgICBnb1RvQ2FydCgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9jYXJ0Iik7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["NavHeader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NavHeader.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"header\">\n    <div class=\"nav-topbar\">\n      <div class=\"container\">\n        <div class=\"topbar-menu\">\n          <a href=\"javascript:;\">小米商城</a>\n          <a href=\"javascript:;\">MUI</a>\n          <a href=\"javascript:;\">云服务</a>\n          <a href=\"javascript:;\">协议规则</a>\n        </div>\n        <div class=\"topbar-user\">\n          <a href=\"javascript:;\" v-if=\"username\">{{ username }}</a>\n          <a href=\"javascript:;\" v-if=\"!username\" @click=\"login\">登录</a>\n          <a href=\"javascript:;\" v-if=\"username\" @click=\"logout\">退出</a>\n          <a href=\"javascript:;\" v-if=\"username\">我的订单</a>\n          <a href=\"javascript:;\" class=\"my-cart\" @click=\"goToCart\">\n            <span class=\"icon-cart\"></span>\n            购物车({{ cartCount }})\n          </a>\n        </div>\n      </div>\n    </div>\n    <div class=\"nav-header\">\n      <div class=\"container\">\n        <div class=\"header-logo\"><a href=\"/#/index\"></a></div>\n        <div class=\"header-menu\">\n          <div class=\"item-menu\">\n            <span>小米手机</span>\n            <div class=\"children\">\n              <ul>\n                <li\n                  class=\"product\"\n                  v-for=\"(item, index) in phoneList\"\n                  :key=\"index\"\n                >\n                  <a v-bind:href=\"'/#/product/' + item.id\" target=\"_blank\">\n                    <div class=\"pro-img\">\n                      <img v-lazy=\"item.mainImage\" :alt=\"item.subtitle\" />\n                    </div>\n                    <div class=\"pro-name\">{{ item.name }}</div>\n                    <div class=\"pro-price\">{{ item.price | currency }}</div>\n                  </a>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div class=\"item-menu\">\n            <span>RedMi红米</span>\n            <div class=\"children\">\n              <ul>\n                <li\n                  class=\"product\"\n                  v-for=\"(item, index) in redMiList\"\n                  :key=\"index\"\n                >\n                  <a :href=\"'/#/product/' + item.id\" target=\"_blank\">\n                    <div class=\"pro-img\">\n                      <img v-lazy=\"item.mainImage\" :alt=\"item.subtitle\" />\n                    </div>\n                    <div class=\"pro-name\">{{ item.name }}</div>\n                    <div class=\"pro-price\">{{ item.price | currency }}</div>\n                  </a>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div class=\"item-menu\">\n            <span>电视</span>\n            <div class=\"children\">\n              <ul>\n                <li class=\"product\">\n                  <a href=\"\" target=\"_blank\">\n                    <div class=\"pro-img\">\n                      <img v-lazy=\"'/imgs/nav-img/nav-3-1.jpg'\" alt=\"\" />\n                    </div>\n                    <div class=\"pro-name\">小米CC9</div>\n                    <div class=\"pro-price\">1799元</div>\n                  </a>\n                </li>\n                <li class=\"product\">\n                  <a href=\"\" target=\"_blank\">\n                    <div class=\"pro-img\">\n                      <img v-lazy=\"'/imgs/nav-img/nav-3-2.jpg'\" alt=\"\" />\n                    </div>\n                    <div class=\"pro-name\">小米壁画电视　65英寸</div>\n                    <div class=\"pro-price\">6999元</div>\n                  </a>\n                </li>\n                <li class=\"product\">\n                  <a href=\"\" target=\"_blank\">\n                    <div class=\"pro-img\">\n                      <img v-lazy=\"'/imgs/nav-img/nav-3-3.png'\" alt=\"\" />\n                    </div>\n                    <div class=\"pro-name\">小米壁画电视　65英寸</div>\n                    <div class=\"pro-price\">6999元</div>\n                  </a>\n                </li>\n                <li class=\"product\">\n                  <a href=\"\" target=\"_blank\">\n                    <div class=\"pro-img\">\n                      <img v-lazy=\"'/imgs/nav-img/nav-3-4.jpg'\" alt=\"\" />\n                    </div>\n                    <div class=\"pro-name\">小米壁画电视　65英寸</div>\n                    <div class=\"pro-price\">6999元</div>\n                  </a>\n                </li>\n                <li class=\"product\">\n                  <a href=\"\" target=\"_blank\">\n                    <div class=\"pro-img\">\n                      <img v-lazy=\"'/imgs/nav-img/nav-3-5.jpg'\" alt=\"\" />\n                    </div>\n                    <div class=\"pro-name\">小米壁画电视　65英寸</div>\n                    <div class=\"pro-price\">6999元</div>\n                  </a>\n                </li>\n                <li class=\"product\">\n                  <a href=\"\" target=\"_blank\">\n                    <div class=\"pro-img\">\n                      <img v-lazy=\"'/imgs/nav-img/nav-3-6.png'\" alt=\"\" />\n                    </div>\n                    <div class=\"pro-name\">小米壁画电视　65英寸</div>\n                    <div class=\"pro-price\">6999元</div>\n                  </a>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n        <div class=\"header-search\">\n          <div class=\"wrapper\">\n            <input type=\"text\" name=\"keyword\" />\n            <a href=\"javascript:;\"></a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"nav-header\",\n  data() {\n    \"\";\n    return {\n      phoneList: [],\n      redMiList: [],\n    };\n  },\n  computed: {\n    //当变量延时加载在data里不更新时，computed当变量发生变化时会重新计算\n    // username() {\n    // return this.$store.state.username;\n    // },\n    // cartCount() {\n    // return this.$store.state.saveCartCount;\n    // },\n    ...mapState([\"username\", \"cartCount\"]), //存值\n  },\n  filters: {\n    currency(val) {\n      if (!val) return \"0.00\";\n      return \"¥\" + val.toFixed(2) + \"元\";\n    },\n  },\n  mounted() {\n    this.getProductList();\n    let params = this.$route.params;\n    if (params && params.from == \"login\") {\n      this.getCartCount();\n    }\n  },\n  methods: {\n    login() {\n      this.$router.push(\"/login\");\n    },\n    getProductList() {\n      this.axios\n        .get(\"./products\", {\n          params: {\n            //get 要用params，post就不需要了\n            categoryId: \"100012\",\n            // pageSize:6\n          },\n        })\n        .then((res) => {\n          if (res.list.length > 6) {\n            this.phoneList = res.list.slice(0, 6); //大于６条只取前面６条\n            this.redMiList = res.list.slice(6, 12);\n          }\n        });\n    },\n    getCartCount() {\n      this.axios.get(\"/carts/products/sum\").then((res = 0) => {\n        this.$store.dispatch(\"saveCartCount\", res);\n      });\n    },\n    logout() {\n      this.axios.post(\"/user/logout\").then((res) => {\n        this.$message.success(\"退出成功\");\n        this.$cookie.set(\"userId\", \"\", { expires: \"-1\" }); //expires:'-1',即刻过期;\n        this.$store.dispatch(\"saveUserName\", \"\");\n        this.$store.dispatch(\"saveCartCount\", \"0\");\n      });\n    },\n    goToCart() {\n      this.$router.push(\"/cart\");\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n@import \"./../assets/scss/base.scss\";\n@import \"./../assets/scss/mixin.scss\";\n@import \"./../assets/scss/config.scss\";\n.header {\n  .nav-topbar {\n    height: 39px;\n    line-height: 39px;\n    background-color: #333333;\n    color: #b0b0b0;\n    .container {\n      @include flex();\n      a {\n        display: inline-block;\n        color: #b0b0b0;\n        margin-right: 17px;\n      }\n      .my-cart {\n        width: 110px;\n        background-color: #ff6600;\n        text-align: center;\n        color: #ffffff;\n        margin-right: 0;\n        .icon-cart {\n          @include bgImg(16px, 12px, \"/imgs/icon-cart-checked.png\");\n          margin-right: 4px;\n        }\n      }\n    }\n  }\n  .nav-header {\n    .container {\n      position: relative;\n      height: 112px;\n      @include flex();\n      .header-menu {\n        display: inline-block;\n        width: 643px;\n        padding-left: 209px;\n        .item-menu {\n          display: inline-block;\n          color: #333333;\n          font-weight: bold;\n          font-size: 16px;\n          line-height: 112px;\n          margin-right: 20px;\n          span {\n            cursor: pointer;\n          }\n          &:hover {\n            color: $colorA;\n            .children {\n              height: 220px;\n              opacity: 1;\n              border-top: 1px solid #e5e5e5;\n            }\n          }\n          .children {\n            position: absolute;\n            top: 112px;\n            left: 0;\n            width: 1226px;\n            height: 0;\n            opacity: 0;\n            overflow: hidden;\n            box-shadow: 0px 7px 6px 0px rgba(0, 0, 0, 0.11);\n            z-index: 10;\n            transition: all 0.5s;\n            background-color: #ffffff;\n            .product {\n              position: relative;\n              float: left;\n              width: 16.6%;\n              height: 220px;\n              font-size: 12px;\n              line-height: 12px;\n              text-align: center;\n              a {\n                display: inline-block;\n              }\n              img {\n                width: auto;\n                height: 111px;\n                margin-top: 26px;\n              }\n              .pro-img {\n                height: 137px;\n              }\n              .pro-name {\n                font-weight: bold;\n                margin-top: 19px;\n                margin-bottom: 8px;\n                color: $colorB;\n              }\n              .pro-price {\n                color: $colorA;\n              }\n              &:before {\n                content: \" \";\n                position: absolute;\n                top: 28px;\n                right: 0;\n                border-left: 1px solid $colorF;\n                height: 100px;\n                width: 1px;\n              }\n              &:last-child:before {\n                display: none;\n              }\n            }\n          }\n        }\n      }\n      .header-search {\n        width: 319px;\n        .wrapper {\n          height: 50px;\n          border: 1px solid #e0e0e0;\n          display: flex;\n          align-items: center;\n          input {\n            border: none;\n            box-sizing: border-box;\n            border-right: 1px solid #e0e0e0;\n            width: 264px;\n            height: 50px;\n            padding-left: 14px;\n          }\n          a {\n            @include bgImg(18px, 18px, \"/imgs/icon-search.png\");\n            margin-left: 17px;\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n"]}]}