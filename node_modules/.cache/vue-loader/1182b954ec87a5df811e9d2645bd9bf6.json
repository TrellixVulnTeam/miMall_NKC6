{"remainingRequest":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/src/pages/orderPay.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/src/pages/orderPay.vue","mtime":1631935438684},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/sass-loader/lib/loader.js","mtime":1631756461819},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manhuax/xmh/2021/Vue全家桶高访小米商城/my code/MiMall-xmh/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLm9yZGVyLXBheSB7CiAgLndyYXBwZXIgewogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTsKICAgIHBhZGRpbmctdG9wOiAzMHB4OwogICAgcGFkZGluZy1ib3R0b206IDYxcHg7CiAgICAub3JkZXItd3JhcCB7CiAgICAgIHBhZGRpbmc6IDYycHggNTBweDsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBtYXJnaW4tYm90dG9tOiAzMHB4OwogICAgICAuaXRlbS1vcmRlciB7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgIC5pY29uLXN1Y2MgewogICAgICAgICAgd2lkdGg6IDkwcHg7CiAgICAgICAgICBoZWlnaHQ6IDkwcHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICBiYWNrZ3JvdW5kOiB1cmwoIi9pbWdzL2ljb24tZ291LnBuZyIpICM4MGM1OGEgbm8tcmVwZWF0IGNlbnRlcjsKICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogNjBweDsKICAgICAgICAgIG1hcmdpbi1yaWdodDogNDBweDsKICAgICAgICB9CiAgICAgICAgLm9yZGVyLWluZm8gewogICAgICAgICAgbWFyZ2luLXJpZ2h0OiAyNDhweDsKICAgICAgICAgIGgyIHsKICAgICAgICAgICAgZm9udC1zaXplOiAyNHB4OwogICAgICAgICAgICBjb2xvcjogIzMzMzMzMzsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICAgICAgICAgIH0KICAgICAgICAgIHAgewogICAgICAgICAgICBjb2xvcjogIzY2NjY2NjsKICAgICAgICAgICAgc3BhbiB7CiAgICAgICAgICAgICAgY29sb3I6ICNmZjY3MDA7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLm9yZGVyLXRvdGFsIHsKICAgICAgICAgICYgPiBwOmZpcnN0LWNoaWxkIHsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDsKICAgICAgICAgIH0KICAgICAgICAgIHNwYW4gewogICAgICAgICAgICBmb250LXNpemU6IDI4cHg7CiAgICAgICAgICAgIGNvbG9yOiAjZmY2NzAwOwogICAgICAgICAgfQogICAgICAgICAgLmljb24tZG93biB7CiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAgICAgd2lkdGg6IDE0cHg7CiAgICAgICAgICAgIGhlaWdodDogMTBweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogdXJsKCIvaW1ncy9pY29uLWRvd24ucG5nIikgbm8tcmVwZWF0IGNlbnRlcjsKICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiBjb250YWluOwogICAgICAgICAgICBtYXJnaW4tbGVmdDogOXB4OwogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC41czsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICAmLnVwIHsKICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgxODBkZWcpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAuaWNvbi11cCB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDE4MGRlZyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIC5pdGVtLWRldGFpbCB7CiAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNkN2Q3ZDc7CiAgICAgICAgcGFkZGluZy10b3A6IDQ3cHg7CiAgICAgICAgcGFkZGluZy1sZWZ0OiAxMzBweDsKICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgbWFyZ2luLXRvcDogNDVweDsKICAgICAgICAuaXRlbSB7CiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxOXB4OwogICAgICAgICAgLmRldGFpbC10aXRsZSB7CiAgICAgICAgICAgIGZsb2F0OiBsZWZ0OwogICAgICAgICAgICB3aWR0aDogMTAwcHg7CiAgICAgICAgICB9CiAgICAgICAgICAuZGV0YWlsLWluZm8gewogICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgICAgIGltZyB7CiAgICAgICAgICAgICAgd2lkdGg6IDMwcHg7CiAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLml0ZW0tcGF5IHsKICAgICAgcGFkZGluZzogMjZweCA1MHB4IDcycHg7CiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7CiAgICAgIGNvbG9yOiAjMzMzMzMzOwogICAgICBoMyB7CiAgICAgICAgZm9udC1zaXplOiAyMHB4OwogICAgICAgIGZvbnQtd2VpZ2h0OiAyMDA7CiAgICAgICAgY29sb3I6ICMzMzMzMzM7CiAgICAgICAgcGFkZGluZy1ib3R0b206IDI0cHg7CiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkN2Q3ZDc7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjZweDsKICAgICAgfQogICAgICAucGF5LXdheSB7CiAgICAgICAgZm9udC1zaXplOiAxOHB4OwogICAgICAgIC5wYXkgewogICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgICAgd2lkdGg6IDE4OHB4OwogICAgICAgICAgaGVpZ2h0OiA2NHB4OwogICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2Q3ZDdkNzsKICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICY6bGFzdC1jaGlsZCB7CiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAyMHB4OwogICAgICAgICAgfQogICAgICAgICAgJi5jaGVja2VkIHsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2ZmNjcwMDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLnBheS1hbGkgewogICAgICAgICAgYmFja2dyb3VuZDogdXJsKCIvaW1ncy9wYXkvaWNvbi1hbGkucG5nIikgbm8tcmVwZWF0IGNlbnRlcjsKICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogMTAzcHggMzhweDsKICAgICAgICAgIG1hcmdpbi10b3A6IDE5cHg7CiAgICAgICAgfQogICAgICAgIC5wYXktd2VjaGF0IHsKICAgICAgICAgIGJhY2tncm91bmQ6IHVybCgiL2ltZ3MvcGF5L2ljb24td2VjaGF0LnBuZyIpIG5vLXJlcGVhdCBjZW50ZXI7CiAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IDEwM3B4IDM4cHg7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["orderPay.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"orderPay.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"order-pay\">\n    <order-header title=\"订单支付\">\n      <template v-slot:tip>\n        <span>请谨防钓鱼链接或诈骗电话，了解更多</span>\n      </template>\n    </order-header>\n    <div class=\"wrapper\">\n      <div class=\"container\">\n        <div class=\"order-wrap\">\n          <div class=\"item-order\">\n            <div class=\"icon-succ\"></div>\n            <div class=\"order-info\">\n              <h2>订单提交成功！去付款咯～</h2>\n              <p>请在<span>30分</span>内完成支付, 超时后将取消订单</p>\n              <p>收货信息：{{ addressInfo }}</p>\n            </div>\n            <div class=\"order-total\">\n              <p>\n                应付总额：<span>{{ payment }}</span\n                >元\n              </p>\n              <p>\n                订单详情<em\n                  class=\"icon-down\"\n                  :class=\"{ up: showDetail }\"\n                  @click=\"showDetail = !showDetail\"\n                ></em>\n              </p>\n            </div>\n          </div>\n          <div class=\"item-detail\" v-if=\"showDetail\">\n            <div class=\"item\">\n              <div class=\"detail-title\">订单号：</div>\n              <div class=\"detail-info theme-color\">{{ orderId }}</div>\n            </div>\n            <div class=\"item\">\n              <div class=\"detail-title\">收货信息：</div>\n              <div class=\"detail-info\">{{ addressInfo }}</div>\n            </div>\n            <div class=\"item good\">\n              <div class=\"detail-title\">商品名称：</div>\n              <div class=\"detail-info\">\n                <ul>\n                  <li v-for=\"(item, index) in orderDetail\" :key=\"index\">\n                    <img v-lazy=\"item.productImage\" />{{ item.productName }}\n                  </li>\n                </ul>\n              </div>\n            </div>\n            <div class=\"item\">\n              <div class=\"detail-title\">发票信息：</div>\n              <div class=\"detail-info\">电子发票 个人</div>\n            </div>\n          </div>\n        </div>\n        <div class=\"item-pay\">\n          <h3>选择以下支付方式付款</h3>\n          <div class=\"pay-way\">\n            <p>支付平台</p>\n            <div\n              class=\"pay pay-ali\"\n              :class=\"{ checked: payType == 1 }\"\n              @click=\"paySubmit(1)\"\n            ></div>\n            <div\n              class=\"pay pay-wechat\"\n              :class=\"{ checked: payType == 2 }\"\n              @click=\"paySubmit(2)\"\n            ></div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <scan-pay-code\n      v-if=\"showPay\"\n      @close=\"closePayModal\"\n      :img=\"payImg\"\n    ></scan-pay-code>\n    <modal\n      title=\"支付确认\"\n      btnType=\"3\"\n      :showModal=\"showPayModal\"\n      sureText=\"查看订单\"\n      cancelText=\"未支付\"\n      @cancel=\"showPayModal = false\"\n      @submit=\"goOrderList\"\n    >\n      <template v-slot:body>\n        <p>您确认是否完成支付？</p>\n      </template>\n    </modal>\n  </div>\n</template>\n<script>\nimport QRCode from \"qrcode\";\nimport OrderHeader from \"./../components/OrderHeader\";\nimport ScanPayCode from \"./../components/ScanPayCode\";\nimport Modal from \"./../components/Modal\";\nexport default {\n  name: \"order-pay\",\n  data() {\n    return {\n      orderId: this.$route.query.orderNo,\n      addressInfo: \"\", //收货人地址\n      orderDetail: [], //订单详情，包含商品列表\n      showDetail: false, //是否显示订单详情\n      payType: \"\", //支付类型\n      showPay: false, //是否显示微信支付弹框\n      payImg: \"\", //微信支付的二维码地址\n      showPayModal: false, //是否显示二次支付确认弹框\n      payment: 0, //订单总金额\n      T: \"\", //定时器ID\n    };\n  },\n  components: {\n    OrderHeader,\n    ScanPayCode,\n    Modal,\n  },\n  mounted() {\n    this.getOrderDetail();\n  },\n  methods: {\n    getOrderDetail() {\n      this.axios.get(`/orders/${this.orderId}`).then((res) => {\n        let item = res.shippingVo;\n        this.addressInfo = `${item.receiverName} ${item.receiverMobile} ${item.receiverProvince} ${item.receiverCity} ${item.receiverDistrict} ${item.receiverAddress}`;\n        this.orderDetail = res.orderItemVoList;\n        this.payment = res.payment;\n      });\n    },\n    paySubmit(payType) {\n      if (payType == 1) {\n        window.open(\"/#/order/alipay?orderId=\" + this.orderId, \"_blank\");\n      } else {\n        this.axios\n          .post(\"/pay\", {\n            orderId: this.orderId,\n            orderName: \"Vue高仿小米商城\",\n            amount: 0.01, //单位元\n            payType: 2, //1支付宝，2微信\n          })\n          .then((res) => {\n            QRCode.toDataURL(res.content)////把res.content转换成二维码\n              .then((url) => {\n                this.showPay = true;\n                this.payImg = url;\n                this.loopOrderState();\n              })\n              .catch(() => {\n                this.$message.error(\"微信二维码生成失败，请稍后重试\");\n              });\n          });\n      }\n    },\n    // 关闭微信弹框\n    closePayModal() {\n      this.showPay = false;\n      this.showPayModal = true;\n      clearInterval(this.T);\n    },\n    // 轮询当前订单支付状态\n    loopOrderState() {\n      this.T = setInterval(() => {\n        this.axios.get(`/orders/${this.orderId}`).then((res) => {\n          if (res.status == 20) {\n            clearInterval(this.T);\n            this.goOrderList();\n          }\n        });\n      }, 1000);\n    },\n    goOrderList() {\n      this.$router.push(\"/order/list\");\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n.order-pay {\n  .wrapper {\n    background-color: #f5f5f5;\n    padding-top: 30px;\n    padding-bottom: 61px;\n    .order-wrap {\n      padding: 62px 50px;\n      background-color: #fff;\n      font-size: 14px;\n      margin-bottom: 30px;\n      .item-order {\n        display: flex;\n        align-items: center;\n        .icon-succ {\n          width: 90px;\n          height: 90px;\n          border-radius: 50%;\n          background: url(\"/imgs/icon-gou.png\") #80c58a no-repeat center;\n          background-size: 60px;\n          margin-right: 40px;\n        }\n        .order-info {\n          margin-right: 248px;\n          h2 {\n            font-size: 24px;\n            color: #333333;\n            margin-bottom: 20px;\n          }\n          p {\n            color: #666666;\n            span {\n              color: #ff6700;\n            }\n          }\n        }\n        .order-total {\n          & > p:first-child {\n            margin-bottom: 30px;\n          }\n          span {\n            font-size: 28px;\n            color: #ff6700;\n          }\n          .icon-down {\n            display: inline-block;\n            width: 14px;\n            height: 10px;\n            background: url(\"/imgs/icon-down.png\") no-repeat center;\n            background-size: contain;\n            margin-left: 9px;\n            transition: all 0.5s;\n            cursor: pointer;\n            &.up {\n              transform: rotate(180deg);\n            }\n          }\n          .icon-up {\n            transform: rotate(180deg);\n          }\n        }\n      }\n      .item-detail {\n        border-top: 1px solid #d7d7d7;\n        padding-top: 47px;\n        padding-left: 130px;\n        font-size: 14px;\n        margin-top: 45px;\n        .item {\n          margin-bottom: 19px;\n          .detail-title {\n            float: left;\n            width: 100px;\n          }\n          .detail-info {\n            display: inline-block;\n            img {\n              width: 30px;\n              vertical-align: middle;\n            }\n          }\n        }\n      }\n    }\n    .item-pay {\n      padding: 26px 50px 72px;\n      background-color: #ffffff;\n      color: #333333;\n      h3 {\n        font-size: 20px;\n        font-weight: 200;\n        color: #333333;\n        padding-bottom: 24px;\n        border-bottom: 1px solid #d7d7d7;\n        margin-bottom: 26px;\n      }\n      .pay-way {\n        font-size: 18px;\n        .pay {\n          display: inline-block;\n          width: 188px;\n          height: 64px;\n          border: 1px solid #d7d7d7;\n          cursor: pointer;\n          &:last-child {\n            margin-left: 20px;\n          }\n          &.checked {\n            border: 1px solid #ff6700;\n          }\n        }\n        .pay-ali {\n          background: url(\"/imgs/pay/icon-ali.png\") no-repeat center;\n          background-size: 103px 38px;\n          margin-top: 19px;\n        }\n        .pay-wechat {\n          background: url(\"/imgs/pay/icon-wechat.png\") no-repeat center;\n          background-size: 103px 38px;\n        }\n      }\n    }\n  }\n}\n</style>"]}]}